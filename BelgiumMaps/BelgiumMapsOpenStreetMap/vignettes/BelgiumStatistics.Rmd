<!--
%\VignetteEngine{knitr::docco_linear}
%\VignetteIndexEntry{An Introduction to the BelgiumMapsOpenStreetMap package}
-->

An Introduction to **BelgiumMapsOpenStreetMap** package
=======================================


```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(out.extra='style="display:block; margin: auto"', fig.align="center")
```


Introduction
------------


The  **BelgiumMapsOpenStreetMap** package contains maps of Belgium extracted from OpenStreetMap


Visualization Methods
----------------------------
This package contains administrative boundaries at different levels.

```{r basic plots}
library(sp)
library(BelgiumMapsOpenStreetMap)
data(BE_OSM_ADMIN)
plot(BE_OSM_ADMIN)
plot(subset(BE_OSM_ADMIN, TAG.admin.level %in% "2"))
plot(subset(BE_OSM_ADMIN, TAG.admin.level %in% "4"))
plot(subset(BE_OSM_ADMIN, TAG.admin.level %in% "6"))
plot(subset(BE_OSM_ADMIN, TAG.admin.level %in% "7"))
plot(subset(BE_OSM_ADMIN, TAG.admin.level %in% "8"))
## Boundaries at the level 9 seem to be incomplete
plot(subset(BE_OSM_ADMIN, TAG.admin.level %in% "9"))
```


Integrate with BelgiumStatistics
----------------------------
The data also contains NIS codes which can be used to link against the data in the BelgiumStatistics package.

```{r integrated with belgiumstatistics}
library(BelgiumStatistics)
library(BelgiumMapsOpenStreetMap)
library(data.table)
library(leaflet)

data(BE_OSM_ADMIN, package = "BelgiumMapsOpenStreetMap")
data(TF_SOC_POP_STRUCT_2015, package = "BelgiumStatistics")

x <- as.data.table(TF_SOC_POP_STRUCT_2015)
x <- x[, list(MS_POPULATION = sum(MS_POPULATION),
              Females = 100 * sum(MS_POPULATION[CD_SEX == "F"]) / sum(MS_POPULATION)),
       by = list(CD_MUNTY_REFNIS, TX_MUNTY_DESCR_NL, TX_MUNTY_DESCR_FR)]

mymap <- subset(BE_OSM_ADMIN, !is.na(TAG.ref.INS))
myenrichedmap <- merge(mymap, x, by.x = "TAG.ref.INS", by.y = "CD_MUNTY_REFNIS", all.x=TRUE, all.y=FALSE)
myenrichedmap <- subset(myenrichedmap, !is.na(Females))
pal <- colorNumeric(palette = "Blues", domain = myenrichedmap$Females)
leaflet(myenrichedmap) %>%
  addTiles() %>%
  addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 0.85, color = ~pal(Females)) %>%
  addPopups(lng = 4.366354, lat = 50.86619, popup="BNOSAC offices<br/>www.bnosac.be")
```


Other datasets
----------------------------
Next to the administrative boundaries which were created in PostGIS, the shapefiles provided by Geofabrik in the file http://download.geofabrik.de/europe/belgium-latest.shp.zip are also made available in the package.
This includes data of landuse, natural, places, points, railways, roads and waterways.

```{r other geospatial data}
data(BE_OSM_PLACES)
data(BE_OSM_POINTS)
data(BE_OSM_RAILWAYS)
data(BE_OSM_ROADS)
data(BE_OSM_WATERWAYS)
data(BE_OSM_LANDUSE)

str(as.data.frame(BE_OSM_ROADS))
str(as.data.frame(BE_OSM_LANDUSE))

## Plot
plot(BE_OSM_RAILWAYS)
plot(BE_OSM_WATERWAYS)

plot(subset(BE_OSM_ROADS, type %in% c("motorway", "primary")))
plot(subset(BE_OSM_LANDUSE, type == "industrial"))
lines(subset(BE_OSM_WATERWAYS, type %in% c("canal")), col = "blue")
plot(subset(BE_OSM_LANDUSE, type == "farmland"), col = "lightgreen")

```


